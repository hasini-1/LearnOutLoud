"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createNodejsEnv = createNodejsEnv;
const createFileSystem_1 = require("./createFileSystem");
function createNodejsEnv() {
    const globalAny = global;
    const Canvas = globalAny.Canvas || globalAny.HTMLCanvasElement;
    const Image = globalAny.Image || globalAny.HTMLImageElement;
    const createCanvasElement = () => {
        if (Canvas) {
            return new Canvas();
        }
        throw new Error('createCanvasElement - missing Canvas implementation for nodejs environment');
    };
    const createImageElement = () => {
        if (Image) {
            return new Image();
        }
        throw new Error('createImageElement - missing Image implementation for nodejs environment');
    };
    const fetch = globalAny.fetch ||
        (() => {
            throw new Error('fetch - missing fetch implementation for nodejs environment');
        });
    const fileSystem = (0, createFileSystem_1.createFileSystem)();
    return Object.assign({ Canvas: Canvas || class {
        }, CanvasRenderingContext2D: globalAny.CanvasRenderingContext2D || class {
        }, Image: Image || class {
        }, ImageData: globalAny.ImageData || class {
        }, Video: globalAny.HTMLVideoElement || class {
        }, createCanvasElement,
        createImageElement,
        fetch }, fileSystem);
}
